---
title: "Lab 3"
author: "Allison Perusse"
date: "2/7/2022"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, load}
library(gapminder)
library(tidyverse)
library(dplyr)
library(ggplot2)
```

```{r}
view(gapminder)
```

```{r}
gapminder |>
  filter(country %in% c("Italy","Taiwan", "Sweden") & year == 1970-1979)

```
  
```{r}
gapminder |>
   filter(country %in% c("Italy", "Taiwan", "Sweden") & year == 1970-1979) |> 
  select(country, gdpPercap) |>
  print()
```

```{r}
new_gap <- gapminder |> 
  arrange(year) |>
   group_by(country) |>
   mutate(lifeExp_change = lifeExp - lag(lifeExp)) |>
  filter(lifeExp_change < 0) |>
  ungroup() |>
  filter(lifeExp_change == min(lifeExp_change))
 print(new_gap)
 
 #how do you specify this to find ONLY the countries that experiences a drop in life exp? Only keep data from countries 
```

```{r}
gapminder |>
  group_by(country)|>
  summarize(max = max(gdpPercap))
```

```{r}
gapminder |>
  filter(country %in% "Canada")|>
  ggplot()|>
  aes(x = log(gdpPercap), y = lifeExp)|>
  geom_point(alpha = 0.1)
```


